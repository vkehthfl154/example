<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<link rel="stylesheet" href="style.css">
</head>

<body>
	<div class="top" style="height: 100vh; background:#ccc"></div>

	<div class="main">
		<div class="skills">
			<div class="skill">
				<h2 class="skill_name">HTML</h2>
				<div class="skill-bar">
					<div class="skill-per" per="95"></div>
				</div>
			</div><!-- //skill -->
		
			<div class="skill">
				<h2 class="skill_name">CSS</h2>
				<div class="skill-bar">
					<div class="skill-per" per="90"></div>
				</div>
			</div><!-- //skill -->
		
			<div class="skill">
				<h2 class="skill_name">javaScript</h2>
				<div class="skill-bar">
					<div class="skill-per" per="70"></div>
				</div>
			</div><!-- //skill -->

		</div>
	</div>

	<div class="bottom" style="height: 100vh; background:#ccc"></div>



	<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>

	<script>
		var cunterData = $('.skill-per');
		var executed = false;

		$(window).scroll(function(){
			var $scroll = $(this).scrollTop();
			var $offset = $('.main').offset().top - 600;

			if ($scroll > $offset){
				if (!executed){
					cunterData.each(function(){
						var current = $(this);
						var target = current.attr('per');
						current.css({width: target + "%"})

						$({rate: 0}).animate({rate: target},{
							duration: 2000,
							progress: function(){
								var now = this.rate;
								//A.attr(B) --> A의 속성 B의 값을 가져온다
								//A.attr(B, C) --> A의 속성 B의 값을 C로 바꾼다
								current.attr('per', Math.floor(now) + "%")
							}
						})
					});

					executed = true;

				} //if문
			} //if문
		});

	</script>
</body>

</html>